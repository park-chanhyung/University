<!DOCTYPE html>
<html lang="en" xmlns:layout="http://www.w3.org/1999/xhtml"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>새 과목 생성</title>
    <style>
        .error { color: red; }
        form { max-width: 600px; margin: 0 auto; }
        label { display: inline-block; width: 120px; }
        input, select, textarea { width: 300px; margin-bottom: 10px; }
        button { margin-top: 10px; }
    </style>
</head>
<body>
<div layout:fragment="content" class="container my-3">

<h1>새 과목 생성</h1>
<form th:object="${subjectForm}" method="post">

    <div>
        <label for="classification">분류:</label>
        <select id="classification" th:field="*{classification}" onchange="toggleDepartment()">
            <option value="">선택하세요</option>
            <option value="전공필수">전공필수</option>
            <option value="전공선택">전공선택</option>
            <option value="교양필수">교양필수</option>
            <option value="교양선택">교양선택</option>
        </select>
        <span class="error" th:if="${#fields.hasErrors('classification')}" th:errors="*{classification}"></span>
    </div>

    <div>
        <label for="subjectGrade">교과목 학년:</label>
        <select th:field="*{subjectGrade}">
            <option value="1">1학년</option>
            <option value="2">2학년</option>
            <option value="3">3학년</option>
            <option value="4">4학년</option>
            <option value="0">상관없음</option>
        </select>
        <span class="error" th:if="${#fields.hasErrors('subjectGrade')}" th:errors="*{subjectGrade}"></span>
    </div>

    <div>
        <label for="subjectName">과목명:</label>
        <input type="text" th:field="*{subjectName}" />
        <span class="error" th:if="${#fields.hasErrors('subjectName')}" th:errors="*{subjectName}"></span>
    </div>

    <div>
        <label for="classOverview">수업개요:</label>
        <textarea th:field="*{classOverview}"></textarea>
        <span class="error" th:if="${#fields.hasErrors('classOverview')}" th:errors="*{classOverview}"></span>
    </div>

    <div>
        <label for="classLocation">수업 장소:</label>
        <input type="text" th:field="*{classLocation}" />
        <span class="error" th:if="${#fields.hasErrors('classLocation')}" th:errors="*{classLocation}"></span>
    </div>

    <div>
        <label for="classTime">수업 시간:</label>
        <input type="text" th:field="*{classTime}" />
        <span class="error" th:if="${#fields.hasErrors('classTime')}" th:errors="*{classTime}"></span>
    </div>

    <div>
        <label for="credits">학점:</label>
        <input type="number" th:field="*{credits}" min="1" max="5" />
        <span class="error" th:if="${#fields.hasErrors('credits')}" th:errors="*{credits}"></span>
    </div>

    <div>
        <label for="classNumber">교과목 번호:</label>
        <input type="text" th:field="*{classNumber}" />
        <span class="error" th:if="${#fields.hasErrors('classNumber')}" th:errors="*{classNumber}"></span>
    </div>

    <div>
        <label for="professorName">담당 교수:</label>
        <input type="text" th:field="*{professorName}" />
        <span class="error" th:if="${#fields.hasErrors('professorName')}" th:errors="*{professorName}"></span>
    </div>

    <div>
        <label for="totalCapacity">수강 정원:</label>
        <input type="number" th:field="*{totalCapacity}" min="1" />
        <span class="error" th:if="${#fields.hasErrors('totalCapacity')}" th:errors="*{totalCapacity}"></span>
    </div>

    <div>
        <label for="department">학과:</label>
        <select id="department" th:field="*{department}" disabled>
            <option value="">학과 선택</option>
            <option value="간호학과">간호학과</option>
            <option value="건축학과">건축학과</option>
            <option value="기계공학과">기계공학과</option>
            <option value="경영학과">경영학과</option>
            <option value="연극영화과">연극영화과</option>
            <option value="법학과">법학과</option>
            <option value="전자공학과">전자공학과</option>
            <option value="정보통신학과">정보통신학과</option>
            <option value="호텔조리학과">호텔조리학과</option>
            <option value="화학공학과">화학공학과</option>
        </select>
        <span class="error" th:if="${#fields.hasErrors('department')}" th:errors="*{department}"></span>
    </div>

    <button type="submit">과목 생성</button>
</form>

<script>
    function toggleDepartment() {
        var classification = document.getElementById('classification').value;
        var departmentSelect = document.getElementById('department');
        if (classification === '전공필수' || classification === '전공선택') {
            departmentSelect.disabled = false;
        } else {
            departmentSelect.disabled = true;
            departmentSelect.value = '';
        }
    }

    // 페이지 로드 시 초기 상태 설정
    window.onload = toggleDepartment;
</script>
</body>
</html>